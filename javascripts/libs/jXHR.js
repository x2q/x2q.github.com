// jXHR.js (JSON-P XHR)
// v0.1 (c) Kyle Simpson
// MIT License
(function(e){var t=e.setTimeout,n=e.document,r=0;e.jXHR=function(){function f(){try{u.parentNode.removeChild(u)}catch(e){}}function l(){s=!1,i="",f(),u=null,p(0)}function c(e){try{a.onerror.call(a,e,i)}catch(t){throw new Error(e)}}function h(){if(this.readyState&&this.readyState!=="complete"&&this.readyState!=="loaded"||s)return;this.onload=this.onreadystatechange=null,s=!0,a.readyState!==4&&c("Script failed to load ["+i+"]."),f()}function p(e,t){t=t||[],a.readyState=e,typeof a.onreadystatechange=="function"&&a.onreadystatechange.apply(a,t)}var i,s,o,u,a=null;return a={onerror:null,onreadystatechange:null,readyState:0,open:function(t,n){l(),internal_callback="cb"+r++,function(t){e.jXHR[t]=function(){try{p.call(a,4,arguments)}catch(n){a.readyState=-1,c("Script failed to run ["+i+"].")}e.jXHR[t]=null}}(internal_callback),i=n.replace(/=\?/,"=jXHR."+internal_callback),p(1)},send:function(){t(function(){u=n.createElement("script"),u.setAttribute("type","text/javascript"),u.onload=u.onreadystatechange=function(){h.call(u)},u.setAttribute("src",i),n.getElementsByTagName("head")[0].appendChild(u)},0),p(2)},setRequestHeader:function(){},getResponseHeader:function(){return""},getAllResponseHeaders:function(){return[]}},l(),a}})(window);